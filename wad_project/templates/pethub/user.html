{% extends "pethub/base.html" %}
{% load staticfiles %}

{% block title_block %}
	User - {{user.username}}
{% endblock %}

{% block body_block %}
<div id="mainBody">
	<div id="photoFrame">
		<!-- check user is currently the one logged in -->
		{% if user == request.user %}
		<img width="200" height="200" src="{{ MEDIA_URL }}{{userProfile.userPicture}}" alt="{{user.username}}'s profile picture"/>
		{% else %}
		<img width="200" height="200" src="{% static 'images/user_profile/NoImageAvailable.png' %}" alt="{{user.username}}'s profile picture"/>
		{% endif %}
	</div>
	<div id="infoFrame">

		<h2>{{user.first_name}} {{user.last_name}}</h2>

		<p>{{userProfile.bio}}</p>

		{% if user == request.user %}
		<form action="{% url 'update-user' %}">
			<input type="submit" value="Update Profile" />
		</form>
		{% endif %}

	</div>

	{% if userPosts %}
	<div id="historic_posts">
		<h2>Historic Posts: </h2>
		{% for post in userPosts %}
		<div class="post_container">

			<div class="post_title">
				<h3>{{post.title}}</h3>
			</div>

					{% if post.picture %}
			<div class="post_image">	
				<img width="200px" height="auto" src="{{ MEDIA_URL }}{{post.picture}}" alt="Post image">
				</div>
					{% endif %}


				<div class="post_description">
					<p>{{post.description}} - posted by <a href="{% url 'user_profile' %}{{ post.user.username }}">{{post.user.username}}</a> at {{post.upload_date}}</p>
				</div>

				<div class="post_tags">
					<p>Tags: 
						{% if not post.tags.all %}
							No tags assigned
						{% else %}
							{% for tag in post.tags.all %}
									{{ tag.name }}
							{% endfor %}
						{% endif %}
					</p>
				</div>
				<div class="post_likes">
					<p>
						<strong class="like_count" data-postid="{{post.id}}">{{post.likes}}</strong> people like this post
					</p>
				</div>

					{% if user.is_authenticated %}
					
						<button class="user_post_options" data-postid="{{post.id}}" type="button">
									Like
						</button>
							
						<a class="user_post_options" href="{% url 'delete_post' post.id %}">Delete</a>
									
					{% endif %}

			</div>
		{% endfor %}
		</div>
	{% else %}
		<h2>There are no historic posts by this user to show.</h2>
	{% endif %}

{% endblock %}